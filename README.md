# افزونه تست تشخیص نوع چاقی

افزونه وردپرس برای تست تشخیص نوع چاقی با 9 گروه مختلف و مدیریت داینامیک سوالات.

## ویژگی‌ها

- **9 گروه چاقی**: هورمونی، استرسی، متابولیک، احساسی، ژنتیکی، یویویی، بی‌تحرکی، عادتی، ترکیبی
- **36 سوال**: 4 سوال برای هر گروه با امتیاز 0 تا 3
- **مدیریت داینامیک**: امکان ویرایش سوالات، گزینه‌ها و امتیازات از پنل ادمین
- **ویدیوهای آموزشی**: هر گروه ویدیوی مخصوص خود دارد
- **شورت‌کدها**: 
  - `[oa_quiz]` یا `[obesity_assessment]` برای نمایش مرحله‌ای (پیش‌فرض)
  - `[oa_quiz_all]` برای نمایش همه سوالات در یک صفحه
- **منوی سایت**: گزینه "ویدئوی دستهٔ شما" برای نمایش نتیجه آخر
- **پشتیبانی کامل از RTL**: طراحی راست‌چین و فارسی

## نصب

1. فایل‌های افزونه را در پوشه `/wp-content/plugins/obesity-assessment/` قرار دهید
2. افزونه را از پنل ادمین وردپرس فعال کنید
3. جداول دیتابیس و داده‌های پیش‌فرض به‌طور خودکار ایجاد می‌شوند

## استفاده

### شورت‌کدها

#### نمایش مرحله‌ای (پیش‌فرض)
```
[oa_quiz]
```
یا
```
[obesity_assessment]
```

#### نمایش همه سوالات در یک صفحه
```
[oa_quiz_all]
```

### تفاوت بین دو حالت نمایش

#### حالت مرحله‌ای (`[oa_quiz]`)
- سوالات یکی یکی نمایش داده می‌شوند
- نوار پیشرفت نشان می‌دهد کاربر در کدام مرحله است
- دکمه‌های "قبلی" و "بعدی" برای حرکت بین سوالات
- مناسب برای تجربه کاربری بهتر و کاهش خستگی

#### حالت همه سوالات (`[oa_quiz_all]`)
- تمام 36 سوال در یک صفحه نمایش داده می‌شوند
- سوالات بر اساس گروه‌ها دسته‌بندی شده‌اند
- امکان مرور سریع و پاسخ‌دهی یکجا
- مناسب برای کاربرانی که ترجیح می‌دهند همه چیز را ببینند

### منوی سایت
گزینه "ویدئوی دستهٔ شما" به‌طور خودکار به منوی اصلی اضافه می‌شود.

### پنل ادمین
- **داشبورد**: آمار کلی و آخرین نتایج
- **گروه‌ها**: مدیریت گروه‌های چاقی
- **سوالات**: مدیریت سوالات و گزینه‌ها
- **نتایج**: مشاهده نتایج کاربران

## ساختار دیتابیس

### جدول گروه‌ها (`oa_groups`)
- `id`: شناسه گروه
- `name`: نام گروه
- `description`: توضیحات
- `tips`: توصیه‌ها
- `video_url`: لینک ویدیو
- `display_order`: ترتیب نمایش

### جدول سوالات (`oa_questions`)
- `id`: شناسه سوال
- `group_id`: شناسه گروه
- `question_text`: متن سوال
- `display_order`: ترتیب نمایش

### جدول گزینه‌ها (`oa_options`)
- `id`: شناسه گزینه
- `question_id`: شناسه سوال
- `option_text`: متن گزینه
- `score`: امتیاز (0-3)
- `display_order`: ترتیب نمایش

### جدول نتایج (`oa_results`)
- `id`: شناسه نتیجه
- `user_id`: شناسه کاربر
- `session_id`: شناسه جلسه
- `group_scores`: امتیازات گروه‌ها (JSON)
- `winning_groups`: گروه‌های برنده (JSON)

## منطق محاسبه نتیجه

1. **امتیاز هر گروه**: مجموع امتیاز 4 سوال (حداکثر 12)
2. **گروه برنده**: گروه‌هایی که امتیاز 12 دارند
3. **اگر هیچ گروهی 12 نگرفت**: گروه‌هایی با بیشترین امتیاز
4. **نمایش ویدیو**: فقط ویدیوهای گروه‌های برنده

## فایل‌های اصلی

- `obesity-assessment.php`: فایل اصلی افزونه
- `admin/dashboard.php`: پنل ادمین
- `admin/ajax-handlers.php`: پردازش‌گرهای AJAX
- `templates/quiz-form.php`: فرم تست مرحله‌ای
- `templates/quiz-form-all.php`: فرم تست همه سوالات
- `templates/result-page.php`: صفحه نتیجه
- `assets/css/`: استایل‌های CSS
- `assets/js/`: اسکریپت‌های JavaScript

## پشتیبانی

برای پشتیبانی و گزارش باگ، با توسعه‌دهنده تماس بگیرید.

## مجوز

این افزونه تحت مجوز GPL منتشر شده است.
